# アプリ名

ママさんタクシー

## アプリの概要

チャイルドシート付きタクシー予約アプリ。
保育園に通園する子どもを持つ保護者が、
日時・経由地を設定し、タクシー送迎を予約できる。

## DB関連スクリプト

データベース作成

```sql

CREATE DATABASE mama_taxi;
CREATE USER mama_user IDENTIFIED BY '1234';
GRANT ALL ON mama_taxi.* to mama_user;

```

テーブル作成(計12個)

1. users
2. areas
3. adresses
4. children
5. reseaves
6. reserve_children
7. drivers
8. shifts
9. schedules
10. thoughts
11. categorys
12. news

```sql

CREATE TABLE users (
	id	INT	PRIMARY KEY AUTO_INCREMENT,
	name VARCHAR(50) NOT NULL,
	email VARCHAR(50) NOT NULL,
	password VARCHAR(255) NOT NULL,
	sex TINYINT NOT NULL,
	birth DATE NOT NULL,
	tel CHAR(11) NOT NULL,
	created_at DATETIME	DEFAULT CURRENT_TIMESTAMP,
	updated_at DATETIME	DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

```
```sql

CREATE TABLE areas (
	id	INT	PRIMARY KEY AUTO_INCREMENT,
	name VARCHAR(50) NOT NULL,
	area_code INT NOT NULL,
	x_axis INT NOT NULL,
	y_axis INT NOT NULL,
	created_at DATETIME	DEFAULT CURRENT_TIMESTAMP,
	updated_at DATETIME	DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

```
```sql

CREATE TABLE adresses (
	id INT PRIMARY KEY AUTO_INCREMENT,
	user_id INT NOT NULL,
	name VARCHAR(50) NOT NULL,
	tel CHAR(11),
	postal_code CHAR(11) NOT NULL,
	adress VARCHAR(255) NOT NULL,
	area_id INT NOT NULL,
	created_at DATETIME	DEFAULT CURRENT_TIMESTAMP,
	updated_at DATETIME	DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
	FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE RESTRICT ON UPDATE RESTRICT
);

```
```sql

CREATE TABLE children (
	id INT PRIMARY KEY AUTO_INCREMENT,
	user_id	INT NOT NULL,
	name VARCHAR(50) NOT NULL,
	sex TINYINT NOT NULL,
	birth DATE NOT NULL,
	adress_id INT NOT NULL,
	created_at DATETIME	DEFAULT CURRENT_TIMESTAMP,
	updated_at DATETIME	DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
	FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE RESTRICT ON UPDATE RESTRICT,
	FOREIGN KEY (adress_id) REFERENCES adresses (id) ON DELETE RESTRICT ON UPDATE RESTRICT
);

```
```sql

CREATE TABLE reseaves (
	id INT PRIMARY KEY AUTO_INCREMENT,
	user_id INT NOT NULL,
	departure_time DATETIME NOT NULL,
	destination_time DATETIME NOT NULL,
	departure_area_id INT NOT NULL,
	departure_postal_code CHAR(7) NOT NULL,
	departure_adress VARCHAR(255) NOT NULL,
	destination_area_id INT NOT NULL,
	destination_postal_code CHAR(7) NOT NULL,
	destination_adress VARCHAR(255) NOT NULL,
	waypoint_1_area_id INT NOT NULL,
	waypoint_1_postal_code CHAR(7) NOT NULL,
	waypoint_1_adress VARCHAR(255) NOT NULL,
	waypoint_2_area_id INT NOT NULL,
	waypoint_2_postal_code CHAR(7) NOT NULL,
	waypoint_2_adress VARCHAR(255) NOT NULL,
	created_at DATETIME	DEFAULT CURRENT_TIMESTAMP,
	updated_at DATETIME	DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
	FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE RESTRICT ON UPDATE RESTRICT,
	FOREIGN KEY (departure_area_id) REFERENCES areas (id) ON DELETE RESTRICT ON UPDATE RESTRICT,
	FOREIGN KEY (destination_area_id) REFERENCES areas (id) ON DELETE RESTRICT ON UPDATE RESTRICT,
	FOREIGN KEY (waypoint_1_area_id) REFERENCES areas (id) ON DELETE RESTRICT ON UPDATE RESTRICT,
	FOREIGN KEY (waypoint_2_area_id) REFERENCES areas (id) ON DELETE RESTRICT ON UPDATE RESTRICT
);

```
```sql

CREATE TABLE reserve_children (
	id INT PRIMARY KEY AUTO_INCREMENT,
	reseave_id INT NOT NULL,
	child_id INT NOT NULL,
	created_at DATETIME	DEFAULT CURRENT_TIMESTAMP,
	updated_at DATETIME	DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
	FOREIGN KEY (reseave_id) REFERENCES reseaves (id) ON DELETE RESTRICT ON UPDATE RESTRICT,
	FOREIGN KEY (child_id) REFERENCES children (id) ON DELETE RESTRICT ON UPDATE RESTRICT
);

```
```sql

CREATE TABLE drivers (
	id INT PRIMARY KEY AUTO_INCREMENT,
	name VARCHAR(50) NOT NULL,
	birth DATE NOT NULL,
	sex TINYINT NOT NULL,
	hire_date DATE NOT NULL,
	created_at DATETIME	DEFAULT CURRENT_TIMESTAMP,
	updated_at DATETIME	DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

```
```sql

CREATE TABLE shifts (
	id INT PRIMARY KEY AUTO_INCREMENT,
	driver_id INT NOT NULL,
	commuting_time DATETIME NOT NULL,
	leave_time DATETIME NOT NULL,
	rest_time INT NOT NULL,
	rest_timing DATETIME NOT NULL,
	created_at DATETIME	DEFAULT CURRENT_TIMESTAMP,
	updated_at DATETIME	DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
	FOREIGN KEY (driver_id) REFERENCES drivers (id) ON DELETE RESTRICT ON UPDATE RESTRICT
);

```
```sql

CREATE TABLE schedules(
	id INT PRIMARY KEY AUTO_INCREMENT,
	driver_id INT NOT NULL,
	reseave_id INT NOT NULL,
	created_at DATETIME	DEFAULT CURRENT_TIMESTAMP,
	updated_at DATETIME	DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
	FOREIGN KEY (driver_id) REFERENCES drivers (id) ON DELETE RESTRICT ON UPDATE RESTRICT,
	FOREIGN KEY (reseave_id) REFERENCES reseaves (id) ON DELETE RESTRICT ON UPDATE RESTRICT
);

```
```sql

CREATE TABLE thoughts(
	id INT PRIMARY KEY AUTO_INCREMENT,
	user_id INT NOT NULL,
	reseave_id INT NOT NULL,
	heading VARCHAR(255) NOT NULL,
	text TEXT NOT NULL,
	goods INT DEFAULT 0,
	created_at DATETIME	DEFAULT CURRENT_TIMESTAMP,
	updated_at DATETIME	DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
	FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE RESTRICT ON UPDATE RESTRICT,
	FOREIGN KEY (reseave_id) REFERENCES reseaves (id) ON DELETE RESTRICT ON UPDATE RESTRICT
);

```
```sql

CREATE TABLE categorys(
	id INT PRIMARY KEY AUTO_INCREMENT,
	name VARCHAR(50) NOT NULL,
	created_at DATETIME	DEFAULT CURRENT_TIMESTAMP,
	updated_at DATETIME	DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

```
```sql

CREATE TABLE news(
	id INT PRIMARY KEY AUTO_INCREMENT,
	category_id INT NOT NULL,
	heading VARCHAR(255) NOT NULL,
	text TEXT NOT NULL,
	created_at DATETIME	DEFAULT CURRENT_TIMESTAMP,
	updated_at DATETIME	DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
	FOREIGN KEY (category_id) REFERENCES categorys (id) ON DELETE RESTRICT ON UPDATE RESTRICT
);


```